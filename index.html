<!DOCTYPE HTML>
<html>
<head>
    <title>Phaser Spine Example</title>
    
    <script src="bower_components/phaser/build/phaser.js"></script>
    <script src="dist/phaserSpine.js"></script>
</head>
<body>
    <script>

    var spineBoy, game;

    game = new Phaser.Game(600, 600, Phaser.CANVAS, '', {preload: preload, create: create, render: render});

    function preload() {
        game.plugins.add(Phaser.Plugin.PhaserSpine);

        game.load.spine('spineboy', "examples/assets/spineboy.json", ["examples/assets/spineboy.png"]);
    }

    function create() {

        //enable fps calc
        game.time.advancedTiming = true;

        // create a spine boy
        spineBoy = new PIXI.Spine(game, "spineboy", "examples/assets");

        spineBoy.skeleton.setToSetupPose();

        // set the position
        spineBoy.position.x = 200;
        spineBoy.position.y = 400;

        //spineBoy.scale.x = spineBoy.scale.y = window.innerHeight / 400;

        // set up the mixes!
        spineBoy.stateData.setMixByName("walk", "jump", 0.2);
        spineBoy.stateData.setMixByName("jump", "walk", 0.4);

        // play animation

        game.stage.addChild(spineBoy);
        spineBoy.state.setAnimationByName(0, "walk", true);            

        game.input.onDown.add(function(){
            spineBoy.state.setAnimationByName(0, "jump", false);
            spineBoy.state.addAnimationByName(0, "walk", true, 0);
        });
    }

    function render() {
        game.debug.text(game.time.fps || '--', 2, 14, "#00FF00");
    }

    </script>

    </body>
</html>
