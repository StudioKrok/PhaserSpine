var spine={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};spine.BoneData=function(t,e){this.name=t,this.parent=e},spine.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0,flipX:!1,flipY:!1},spine.SlotData=function(t,e){this.name=t,this.boneData=e},spine.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},spine.IkConstraintData=function(t){this.name=t,this.bones=[]},spine.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},spine.Bone=function(t,e,n){this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()},spine.Bone.yDown=!1,spine.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:!1,worldFlipY:!1,updateWorldTransform:function(){var t=this.parent;if(t)this.worldX=this.x*t.m00+this.y*t.m01+t.worldX,this.worldY=this.x*t.m10+this.y*t.m11+t.worldY,this.data.inheritScale?(this.worldScaleX=t.worldScaleX*this.scaleX,this.worldScaleY=t.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?t.worldRotation+this.rotationIK:this.rotationIK,this.worldFlipX=t.worldFlipX!=this.flipX,this.worldFlipY=t.worldFlipY!=this.flipY;else{var e=this.skeleton.flipX,n=this.skeleton.flipY;this.worldX=e?-this.x:this.x,this.worldY=n!=spine.Bone.yDown?-this.y:this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotationIK,this.worldFlipX=e!=this.flipX,this.worldFlipY=n!=this.flipY}var i=this.worldRotation*spine.degRad,r=Math.cos(i),a=Math.sin(i);this.worldFlipX?(this.m00=-r*this.worldScaleX,this.m01=a*this.worldScaleY):(this.m00=r*this.worldScaleX,this.m01=-a*this.worldScaleY),this.worldFlipY!=spine.Bone.yDown?(this.m10=-a*this.worldScaleX,this.m11=-r*this.worldScaleY):(this.m10=a*this.worldScaleX,this.m11=r*this.worldScaleY)},setToSetupPose:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.rotationIK=this.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.flipX=t.flipX,this.flipY=t.flipY},worldToLocal:function(t){var e=t[0]-this.worldX,n=t[1]-this.worldY,i=this.m00,r=this.m10,a=this.m01,s=this.m11;this.worldFlipX!=(this.worldFlipY!=spine.Bone.yDown)&&(i=-i,s=-s);var o=1/(i*s-a*r);t[0]=e*i*o-n*a*o,t[1]=n*s*o-e*r*o},localToWorld:function(t){var e=t[0],n=t[1];t[0]=e*this.m00+n*this.m01+this.worldX,t[1]=e*this.m10+n*this.m11+this.worldY}},spine.Slot=function(t,e){this.data=t,this.bone=e,this.setToSetupPose()},spine.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(t){this.attachment=t,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(t){this._attachmentTime=this.bone.skeleton.time-t},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a;for(var e=this.bone.skeleton.data.slots,n=0,i=e.length;i>n;n++)if(e[n]==t){this.setAttachment(t.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(n,t.attachmentName):null);break}}},spine.IkConstraint=function(t,e){this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=[];for(var n=0,i=t.bones.length;i>n;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)},spine.IkConstraint.prototype={apply:function(){var t=this.target,e=this.bones;switch(e.length){case 1:spine.IkConstraint.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:spine.IkConstraint.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}}},spine.IkConstraint.apply1=function(t,e,n,i){var r=t.data.inheritRotation&&t.parent?t.parent.worldRotation:0,a=t.rotation,s=Math.atan2(n-t.worldY,e-t.worldX)*spine.radDeg-r;t.rotationIK=a+(s-a)*i},spine.IkConstraint.apply2=function(t,e,n,i,r,a){var s=e.rotation,o=t.rotation;if(!a)return e.rotationIK=s,void(t.rotationIK=o);var h,l,p=spine.temp,u=t.parent;u?(p[0]=n,p[1]=i,u.worldToLocal(p),n=(p[0]-t.x)*u.worldScaleX,i=(p[1]-t.y)*u.worldScaleY):(n-=t.x,i-=t.y),e.parent==t?(h=e.x,l=e.y):(p[0]=e.x,p[1]=e.y,e.parent.localToWorld(p),t.worldToLocal(p),h=p[0],l=p[1]);var f=h*t.worldScaleX,m=l*t.worldScaleY,c=Math.atan2(m,f),d=Math.sqrt(f*f+m*m),g=e.data.length*e.worldScaleX,v=2*d*g;if(1e-4>v)return void(e.rotationIK=s+(Math.atan2(i,n)*spine.radDeg-o-s)*a);var y=(n*n+i*i-d*d-g*g)/v;-1>y?y=-1:y>1&&(y=1);var w=Math.acos(y)*r,x=d+g*y,b=g*Math.sin(w),S=Math.atan2(i*x-n*b,n*x+i*b),A=(S-c)*spine.radDeg-o;A>180?A-=360:-180>A&&(A+=360),t.rotationIK=o+A*a,A=(w+c)*spine.radDeg-s,A>180?A-=360:-180>A&&(A+=360),e.rotationIK=s+(A+t.worldRotation-e.parent.worldRotation)*a},spine.Skin=function(t){this.name=t,this.attachments={}},spine.Skin.prototype={addAttachment:function(t,e,n){this.attachments[t+":"+e]=n},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var n in e.attachments){var i=n.indexOf(":"),r=parseInt(n.substring(0,i)),a=n.substring(i+1),s=t.slots[r];if(s.attachment&&s.attachment.name==a){var o=this.getAttachment(r,a);o&&s.setAttachment(o)}}}},spine.Animation=function(t,e,n){this.name=t,this.timelines=e,this.duration=n},spine.Animation.prototype={apply:function(t,e,n,i,r){i&&0!=this.duration&&(n%=this.duration,e%=this.duration);for(var a=this.timelines,s=0,o=a.length;o>s;s++)a[s].apply(t,e,n,r,1)},mix:function(t,e,n,i,r,a){i&&0!=this.duration&&(n%=this.duration,e%=this.duration);for(var s=this.timelines,o=0,h=s.length;h>o;o++)s[o].apply(t,e,n,r,a)}},spine.Animation.binarySearch=function(t,e,n){var i=0,r=Math.floor(t.length/n)-2;if(!r)return n;for(var a=r>>>1;;){if(t[(a+1)*n]<=e?i=a+1:r=a,i==r)return(i+1)*n;a=i+r>>>1}},spine.Animation.binarySearch1=function(t,e){var n=0,i=t.length-2;if(!i)return 1;for(var r=i>>>1;;){if(t[r+1]<=e?n=r+1:i=r,n==i)return n+1;r=n+i>>>1}},spine.Animation.linearSearch=function(t,e,n){for(var i=0,r=t.length-n;r>=i;i+=n)if(t[i]>e)return i;return-1},spine.Curves=function(){this.curves=[]},spine.Curves.prototype={setLinear:function(t){this.curves[19*t]=0},setStepped:function(t){this.curves[19*t]=1},setCurve:function(t,e,n,i,r){var a=.1,s=a*a,o=s*a,h=3*a,l=3*s,p=6*s,u=6*o,f=2*-e+i,m=2*-n+r,c=3*(e-i)+1,d=3*(n-r)+1,g=e*h+f*l+c*o,v=n*h+m*l+d*o,y=f*p+c*u,w=m*p+d*u,x=c*u,b=d*u,S=19*t,A=this.curves;A[S++]=2;for(var I=g,T=v,k=S+19-1;k>S;S+=2)A[S]=I,A[S+1]=T,g+=y,v+=w,y+=x,w+=b,I+=g,T+=v},getCurvePercent:function(t,e){e=0>e?0:e>1?1:e;var n=this.curves,i=19*t,r=n[i];if(0===r)return e;if(1==r)return 0;i++;for(var a=0,s=i,o=i+19-1;o>i;i+=2)if(a=n[i],a>=e){var h,l;return i==s?(h=0,l=0):(h=n[i-2],l=n[i-1]),l+(n[i+1]-l)*(e-h)/(a-h)}var p=n[i-1];return p+(1-p)*(e-a)/(1-a)}},spine.RotateTimeline=function(t){this.curves=new spine.Curves(t),this.frames=[],this.frames.length=2*t},spine.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,n){t*=2,this.frames[t]=e,this.frames[t+1]=n},apply:function(t,e,n,i,r){var a=this.frames;if(!(n<a[0])){var s=t.bones[this.boneIndex];if(n>=a[a.length-2]){for(var o=s.data.rotation+a[a.length-1]-s.rotation;o>180;)o-=360;for(;-180>o;)o+=360;return void(s.rotation+=o*r)}var h=spine.Animation.binarySearch(a,n,2),l=a[h-1],p=a[h],u=1-(n-p)/(a[h-2]-p);u=this.curves.getCurvePercent(h/2-1,u);for(var o=a[h+1]-l;o>180;)o-=360;for(;-180>o;)o+=360;for(o=s.data.rotation+(l+o*u)-s.rotation;o>180;)o-=360;for(;-180>o;)o+=360;s.rotation+=o*r}}},spine.TranslateTimeline=function(t){this.curves=new spine.Curves(t),this.frames=[],this.frames.length=3*t},spine.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,i){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=i},apply:function(t,e,n,i,r){var a=this.frames;if(!(n<a[0])){var s=t.bones[this.boneIndex];if(n>=a[a.length-3])return s.x+=(s.data.x+a[a.length-2]-s.x)*r,void(s.y+=(s.data.y+a[a.length-1]-s.y)*r);var o=spine.Animation.binarySearch(a,n,3),h=a[o-2],l=a[o-1],p=a[o],u=1-(n-p)/(a[o+-3]-p);u=this.curves.getCurvePercent(o/3-1,u),s.x+=(s.data.x+h+(a[o+1]-h)*u-s.x)*r,s.y+=(s.data.y+l+(a[o+2]-l)*u-s.y)*r}}},spine.ScaleTimeline=function(t){this.curves=new spine.Curves(t),this.frames=[],this.frames.length=3*t},spine.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,i){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=i},apply:function(t,e,n,i,r){var a=this.frames;if(!(n<a[0])){var s=t.bones[this.boneIndex];if(n>=a[a.length-3])return s.scaleX+=(s.data.scaleX*a[a.length-2]-s.scaleX)*r,void(s.scaleY+=(s.data.scaleY*a[a.length-1]-s.scaleY)*r);var o=spine.Animation.binarySearch(a,n,3),h=a[o-2],l=a[o-1],p=a[o],u=1-(n-p)/(a[o+-3]-p);u=this.curves.getCurvePercent(o/3-1,u),s.scaleX+=(s.data.scaleX*(h+(a[o+1]-h)*u)-s.scaleX)*r,s.scaleY+=(s.data.scaleY*(l+(a[o+2]-l)*u)-s.scaleY)*r}}},spine.ColorTimeline=function(t){this.curves=new spine.Curves(t),this.frames=[],this.frames.length=5*t},spine.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,n,i,r,a){t*=5,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=a},apply:function(t,e,n,i,r){var a=this.frames;if(!(n<a[0])){var s,o,h,l;if(n>=a[a.length-5]){var p=a.length-1;s=a[p-3],o=a[p-2],h=a[p-1],l=a[p]}else{var u=spine.Animation.binarySearch(a,n,5),f=a[u-4],m=a[u-3],c=a[u-2],d=a[u-1],g=a[u],v=1-(n-g)/(a[u-5]-g);v=this.curves.getCurvePercent(u/5-1,v),s=f+(a[u+1]-f)*v,o=m+(a[u+2]-m)*v,h=c+(a[u+3]-c)*v,l=d+(a[u+4]-d)*v}var y=t.slots[this.slotIndex];1>r?(y.r+=(s-y.r)*r,y.g+=(o-y.g)*r,y.b+=(h-y.b)*r,y.a+=(l-y.a)*r):(y.r=s,y.g=o,y.b=h,y.a=l)}}},spine.AttachmentTimeline=function(t){this.curves=new spine.Curves(t),this.frames=[],this.frames.length=t,this.attachmentNames=[],this.attachmentNames.length=t},spine.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},apply:function(t,e,n){var i=this.frames;if(n<i[0])return void(e>n&&this.apply(t,e,Number.MAX_VALUE,null,0));e>n&&(e=-1);var r=n>=i[i.length-1]?i.length-1:spine.Animation.binarySearch1(i,n)-1;if(!(i[r]<e)){var a=this.attachmentNames[r];t.slots[this.slotIndex].setAttachment(a?t.getAttachmentBySlotIndex(this.slotIndex,a):null)}}},spine.EventTimeline=function(t){this.frames=[],this.frames.length=t,this.events=[],this.events.length=t},spine.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.events[t]=n},apply:function(t,e,n,i,r){if(i){var a=this.frames,s=a.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,i,r),e=-1;else if(e>=a[s-1])return;if(!(n<a[0])){var o;if(e<a[0])o=0;else{o=spine.Animation.binarySearch1(a,e);for(var h=a[o];o>0&&a[o-1]==h;)o--}for(var l=this.events;s>o&&n>=a[o];o++)i.push(l[o])}}}},spine.DrawOrderTimeline=function(t){this.frames=[],this.frames.length=t,this.drawOrders=[],this.drawOrders.length=t},spine.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},apply:function(t,e,n){var i=this.frames;if(!(n<i[0])){var r;r=n>=i[i.length-1]?i.length-1:spine.Animation.binarySearch1(i,n)-1;var a=t.drawOrder,s=t.slots,o=this.drawOrders[r];if(o)for(var h=0,l=o.length;l>h;h++)a[h]=t.slots[o[h]];else for(var h=0,l=s.length;l>h;h++)a[h]=s[h]}}},spine.FfdTimeline=function(t){this.curves=new spine.Curves(t),this.frames=[],this.frames.length=t,this.frameVertices=[],this.frameVertices.length=t},spine.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},apply:function(t,e,n,i,r){var a=t.slots[this.slotIndex];if(a.attachment==this.attachment){var s=this.frames;if(!(n<s[0])){var o=this.frameVertices,h=o[0].length,l=a.attachmentVertices;if(l.length!=h&&(r=1),l.length=h,n>=s[s.length-1]){var p=o[s.length-1];if(1>r)for(var u=0;h>u;u++)l[u]+=(p[u]-l[u])*r;else for(var u=0;h>u;u++)l[u]=p[u]}else{var f=spine.Animation.binarySearch1(s,n),m=s[f],c=1-(n-m)/(s[f-1]-m);c=this.curves.getCurvePercent(f-1,0>c?0:c>1?1:c);var d=o[f-1],g=o[f];if(1>r)for(var u=0;h>u;u++){var v=d[u];l[u]+=(v+(g[u]-v)*c-l[u])*r}else for(var u=0;h>u;u++){var v=d[u];l[u]=v+(g[u]-v)*c}}}}}},spine.IkConstraintTimeline=function(t){this.curves=new spine.Curves(t),this.frames=[],this.frames.length=3*t},spine.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,i){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=i},apply:function(t,e,n,i,r){var a=this.frames;if(!(n<a[0])){var s=t.ikConstraints[this.ikConstraintIndex];if(n>=a[a.length-3])return s.mix+=(a[a.length-2]-s.mix)*r,void(s.bendDirection=a[a.length-1]);var o=spine.Animation.binarySearch(a,n,3),h=a[o+-2],l=a[o],p=1-(n-l)/(a[o+-3]-l);p=this.curves.getCurvePercent(o/3-1,p);var u=h+(a[o+1]-h)*p;s.mix+=(u-s.mix)*r,s.bendDirection=a[o+-1]}}},spine.FlipXTimeline=function(t){this.curves=new spine.Curves(t),this.frames=[],this.frames.length=2*t},spine.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,n){t*=2,this.frames[t]=e,this.frames[t+1]=n?1:0},apply:function(t,e,n){var i=this.frames;if(n<i[0])return void(e>n&&this.apply(t,e,Number.MAX_VALUE,null,0));e>n&&(e=-1);var r=(n>=i[i.length-2]?i.length:spine.Animation.binarySearch(i,n,2))-2;i[r]<e||(t.bones[boneIndex].flipX=0!=i[r+1])}},spine.FlipYTimeline=function(t){this.curves=new spine.Curves(t),this.frames=[],this.frames.length=2*t},spine.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,n){t*=2,this.frames[t]=e,this.frames[t+1]=n?1:0},apply:function(t,e,n){var i=this.frames;if(n<i[0])return void(e>n&&this.apply(t,e,Number.MAX_VALUE,null,0));e>n&&(e=-1);var r=(n>=i[i.length-2]?i.length:spine.Animation.binarySearch(i,n,2))-2;i[r]<e||(t.bones[boneIndex].flipY=0!=i[r+1])}},spine.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},spine.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(t){for(var e=this.bones,n=0,i=e.length;i>n;n++)if(e[n].name==t)return e[n];return null},findBoneIndex:function(t){for(var e=this.bones,n=0,i=e.length;i>n;n++)if(e[n].name==t)return n;return-1},findSlot:function(t){for(var e=this.slots,n=0,i=e.length;i>n;n++)if(e[n].name==t)return slot[n];return null},findSlotIndex:function(t){for(var e=this.slots,n=0,i=e.length;i>n;n++)if(e[n].name==t)return n;return-1},findSkin:function(t){for(var e=this.skins,n=0,i=e.length;i>n;n++)if(e[n].name==t)return e[n];return null},findEvent:function(t){for(var e=this.events,n=0,i=e.length;i>n;n++)if(e[n].name==t)return e[n];return null},findAnimation:function(t){for(var e=this.animations,n=0,i=e.length;i>n;n++)if(e[n].name==t)return e[n];return null},findIkConstraint:function(t){for(var e=this.ikConstraints,n=0,i=e.length;i>n;n++)if(e[n].name==t)return e[n];return null}},spine.Skeleton=function(t){this.data=t,this.bones=[];for(var e=0,n=t.bones.length;n>e;e++){var i=t.bones[e],r=i.parent?this.bones[t.bones.indexOf(i.parent)]:null;this.bones.push(new spine.Bone(i,this,r))}this.slots=[],this.drawOrder=[];for(var e=0,n=t.slots.length;n>e;e++){var a=t.slots[e],s=this.bones[t.bones.indexOf(a.boneData)],o=new spine.Slot(a,s);this.slots.push(o),this.drawOrder.push(o)}this.ikConstraints=[];for(var e=0,n=t.ikConstraints.length;n>e;e++)this.ikConstraints.push(new spine.IkConstraint(t.ikConstraints[e],this));this.boneCache=[],this.updateCache()},spine.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var t=this.ikConstraints,e=t.length,n=e+1,i=this.boneCache;i.length>n&&(i.length=n);for(var r=0,a=i.length;a>r;r++)i[r].length=0;for(;i.length<n;)i[i.length]=[];var s=i[0],o=this.bones;t:for(var r=0,a=o.length;a>r;r++){var h=o[r],l=h;do{for(var p=0;e>p;p++)for(var u=t[p],f=u.bones[0],m=u.bones[u.bones.length-1];;){if(l==m){i[p].push(h),i[p+1].push(h);continue t}if(m==f)break;m=m.parent}l=l.parent}while(l);s[s.length]=h}},updateWorldTransform:function(){for(var t=this.bones,e=0,n=t.length;n>e;e++){var i=t[e];i.rotationIK=i.rotation}for(var e=0,r=this.boneCache.length-1;;){for(var a=this.boneCache[e],s=0,o=a.length;o>s;s++)a[s].updateWorldTransform();if(e==r)break;this.ikConstraints[e].apply(),e++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var t=this.bones,e=0,n=t.length;n>e;e++)t[e].setToSetupPose();for(var i=this.ikConstraints,e=0,n=i.length;n>e;e++){var r=i[e];r.bendDirection=r.data.bendDirection,r.mix=r.data.mix}},setSlotsToSetupPose:function(){for(var t=this.slots,e=this.drawOrder,n=0,i=t.length;i>n;n++)e[n]=t[n],t[n].setToSetupPose(n)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){for(var e=this.bones,n=0,i=e.length;i>n;n++)if(e[n].data.name==t)return e[n];return null},findBoneIndex:function(t){for(var e=this.bones,n=0,i=e.length;i>n;n++)if(e[n].data.name==t)return n;return-1},findSlot:function(t){for(var e=this.slots,n=0,i=e.length;i>n;n++)if(e[n].data.name==t)return e[n];return null},findSlotIndex:function(t){for(var e=this.slots,n=0,i=e.length;i>n;n++)if(e[n].data.name==t)return n;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){if(t)if(this.skin)t._attachAll(this,this.skin);else for(var e=this.slots,n=0,i=e.length;i>n;n++){var r=e[n],a=r.data.attachmentName;if(a){var s=t.getAttachment(n,a);s&&r.setAttachment(s)}}this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var n=this.skin.getAttachment(t,e);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},setAttachment:function(t,e){for(var n=this.slots,i=0,r=n.length;r>i;i++){var a=n[i];if(a.data.name==t){var s=null;if(e&&(s=this.getAttachmentBySlotIndex(i,e),!s))throw"Attachment not found: "+e+", for slot: "+t;return void a.setAttachment(s)}}throw"Slot not found: "+t},findIkConstraint:function(t){for(var e=this.ikConstraints,n=0,i=e.length;i>n;n++)if(e[n].data.name==t)return e[n];return null},update:function(t){this.time+=t}},spine.EventData=function(t){this.name=t},spine.EventData.prototype={intValue:0,floatValue:0,stringValue:null},spine.Event=function(t){this.data=t},spine.Event.prototype={intValue:0,floatValue:0,stringValue:null},spine.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},spine.RegionAttachment=function(t){this.name=t,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},spine.RegionAttachment.prototype={type:spine.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,n,i,r){var a=this.uvs;r?(a[2]=t,a[3]=i,a[4]=t,a[5]=e,a[6]=n,a[7]=e,a[0]=n,a[1]=i):(a[0]=t,a[1]=i,a[2]=t,a[3]=e,a[4]=n,a[5]=e,a[6]=n,a[7]=i)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.regionOffsetX*t,i=-this.height/2*this.scaleY+this.regionOffsetY*e,r=n+this.regionWidth*t,a=i+this.regionHeight*e,s=this.rotation*spine.degRad,o=Math.cos(s),h=Math.sin(s),l=n*o+this.x,p=n*h,u=i*o+this.y,f=i*h,m=r*o+this.x,c=r*h,d=a*o+this.y,g=a*h,v=this.offset;v[0]=l-f,v[1]=u+p,v[2]=l-g,v[3]=d+p,v[4]=m-g,v[5]=d+c,v[6]=m-f,v[7]=u+c},computeVertices:function(t,e,n,i){t+=n.worldX,e+=n.worldY;var r=n.m00,a=n.m01,s=n.m10,o=n.m11,h=this.offset;i[0]=h[0]*r+h[1]*a+t,i[1]=h[0]*s+h[1]*o+e,i[2]=h[2]*r+h[3]*a+t,i[3]=h[2]*s+h[3]*o+e,i[4]=h[4]*r+h[5]*a+t,i[5]=h[4]*s+h[5]*o+e,i[6]=h[6]*r+h[7]*a+t,i[7]=h[6]*s+h[7]*o+e}},spine.MeshAttachment=function(t){this.name=t},spine.MeshAttachment.prototype={type:spine.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,e=this.regionV2-this.regionV,n=this.regionUVs.length;if(this.uvs&&this.uvs.length==n||(this.uvs=new spine.Float32Array(n)),this.regionRotate)for(var i=0;n>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i+1]*t,this.uvs[i+1]=this.regionV+e-this.regionUVs[i]*e;else for(var i=0;n>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i]*t,this.uvs[i+1]=this.regionV+this.regionUVs[i+1]*e},computeWorldVertices:function(t,e,n,i){var r=n.bone;t+=r.worldX,e+=r.worldY;var a=r.m00,s=r.m01,o=r.m10,h=r.m11,l=this.vertices,p=l.length;n.attachmentVertices.length==p&&(l=n.attachmentVertices);for(var u=0;p>u;u+=2){var f=l[u],m=l[u+1];i[u]=f*a+m*s+t,i[u+1]=f*o+m*h+e}}},spine.SkinnedMeshAttachment=function(t){this.name=t},spine.SkinnedMeshAttachment.prototype={type:spine.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,e=this.regionV2-this.regionV,n=this.regionUVs.length;if(this.uvs&&this.uvs.length==n||(this.uvs=new spine.Float32Array(n)),this.regionRotate)for(var i=0;n>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i+1]*t,this.uvs[i+1]=this.regionV+e-this.regionUVs[i]*e;else for(var i=0;n>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i]*t,this.uvs[i+1]=this.regionV+this.regionUVs[i+1]*e},computeWorldVertices:function(t,e,n,i){var r,a,s,o,h,l,p,u=n.bone.skeleton.bones,f=this.weights,m=this.bones,c=0,d=0,g=0,v=0,y=m.length;if(n.attachmentVertices.length)for(var w=n.attachmentVertices;y>d;c+=2){for(a=0,s=0,r=m[d++]+d;r>d;d++,g+=3,v+=2)o=u[m[d]],h=f[g]+w[v],l=f[g+1]+w[v+1],p=f[g+2],a+=(h*o.m00+l*o.m01+o.worldX)*p,s+=(h*o.m10+l*o.m11+o.worldY)*p;i[c]=a+t,i[c+1]=s+e}else for(;y>d;c+=2){for(a=0,s=0,r=m[d++]+d;r>d;d++,g+=3)o=u[m[d]],h=f[g],l=f[g+1],p=f[g+2],a+=(h*o.m00+l*o.m01+o.worldX)*p,s+=(h*o.m10+l*o.m11+o.worldY)*p;i[c]=a+t,i[c+1]=s+e}}},spine.BoundingBoxAttachment=function(t){this.name=t,this.vertices=[]},spine.BoundingBoxAttachment.prototype={type:spine.AttachmentType.boundingbox,computeWorldVertices:function(t,e,n,i){t+=n.worldX,e+=n.worldY;for(var r=n.m00,a=n.m01,s=n.m10,o=n.m11,h=this.vertices,l=0,p=h.length;p>l;l+=2){var u=h[l],f=h[l+1];i[l]=u*r+f*a+t,i[l+1]=u*s+f*o+e}}},spine.AnimationStateData=function(t){this.skeletonData=t,this.animationToMixTime={}},spine.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,n){var i=this.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;var r=this.skeletonData.findAnimation(e);if(!r)throw"Animation not found: "+e;this.setMix(i,r,n)},setMix:function(t,e,n){this.animationToMixTime[t.name+":"+e.name]=n},getMix:function(t,e){var n=t.name+":"+e.name;return this.animationToMixTime.hasOwnProperty(n)?this.animationToMixTime[n]:this.defaultMix}},spine.TrackEntry=function(){},spine.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},spine.AnimationState=function(t){this.data=t,this.tracks=[],this.events=[]},spine.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(t){t*=this.timeScale;for(var e=0;e<this.tracks.length;e++){var n=this.tracks[e];if(n){if(n.time+=t*n.timeScale,n.previous){var i=t*n.previous.timeScale;n.previous.time+=i,n.mixTime+=i}var r=n.next;r?(r.time=n.lastTime-r.delay,r.time>=0&&this.setCurrent(e,r)):!n.loop&&n.lastTime>=n.endTime&&this.clearTrack(e)}}},apply:function(t){for(var e=0;e<this.tracks.length;e++){var n=this.tracks[e];if(n){this.events.length=0;var i=n.time,r=n.lastTime,a=n.endTime,s=n.loop;!s&&i>a&&(i=a);var o=n.previous;if(o){var h=o.time;!o.loop&&h>o.endTime&&(h=o.endTime),o.animation.apply(t,h,h,o.loop,null);var l=n.mixTime/n.mixDuration*n.mix;l>=1&&(l=1,n.previous=null),n.animation.mix(t,n.lastTime,i,s,this.events,l)}else 1==n.mix?n.animation.apply(t,n.lastTime,i,s,this.events):n.animation.mix(t,n.lastTime,i,s,this.events,n.mix);for(var p=0,u=this.events.length;u>p;p++){var f=this.events[p];n.onEvent&&n.onEvent(e,f),this.onEvent&&this.onEvent(e,f)}if(s?r%a>i%a:a>r&&i>=a){var m=Math.floor(i/a);n.onComplete&&n.onComplete(e,m),this.onComplete&&this.onComplete(e,m)}n.lastTime=n.time}}},clearTracks:function(){for(var t=0,e=this.tracks.length;e>t;t++)this.clearTrack(t);this.tracks.length=0},clearTrack:function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];e&&(e.onEnd&&e.onEnd(t),this.onEnd&&this.onEnd(t),this.tracks[t]=null)}},_expandToIndex:function(t){if(t<this.tracks.length)return this.tracks[t];for(;t>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(t,e){var n=this._expandToIndex(t);if(n){var i=n.previous;n.previous=null,n.onEnd&&n.onEnd(t),this.onEnd&&this.onEnd(t),e.mixDuration=this.data.getMix(n.animation,e.animation),e.mixDuration>0&&(e.mixTime=0,e.previous=i&&n.mixTime/n.mixDuration<.5?i:n)}this.tracks[t]=e,e.onStart&&e.onStart(t),this.onStart&&this.onStart(t)},setAnimationByName:function(t,e,n){var i=this.data.skeletonData.findAnimation(e);if(!i)throw"Animation not found: "+e;return this.setAnimation(t,i,n)},setAnimation:function(t,e,n){var i=new spine.TrackEntry;return i.animation=e,i.loop=n,i.endTime=e.duration,this.setCurrent(t,i),i},addAnimationByName:function(t,e,n,i){var r=this.data.skeletonData.findAnimation(e);if(!r)throw"Animation not found: "+e;return this.addAnimation(t,r,n,i)},addAnimation:function(t,e,n,i){var r=new spine.TrackEntry;r.animation=e,r.loop=n,r.endTime=e.duration;var a=this._expandToIndex(t);if(a){for(;a.next;)a=a.next;a.next=r}else this.tracks[t]=r;return 0>=i&&(a?i+=a.endTime-this.data.getMix(a.animation,e):i=0),r.delay=i,r},getCurrent:function(t){return t>=this.tracks.length?null:this.tracks[t]}},spine.SkeletonJson=function(t){this.attachmentLoader=t},spine.SkeletonJson.prototype={scale:1,readSkeletonData:function(t,e){var n=new spine.SkeletonData;n.name=e;var i=t.skeleton;i&&(n.hash=i.hash,n.version=i.spine,n.width=i.width||0,n.height=i.height||0);for(var r=t.bones,a=0,s=r.length;s>a;a++){var o=r[a],h=null;if(o.parent&&(h=n.findBone(o.parent),!h))throw"Parent bone not found: "+o.parent;var l=new spine.BoneData(o.name,h);l.length=(o.length||0)*this.scale,l.x=(o.x||0)*this.scale,l.y=(o.y||0)*this.scale,l.rotation=o.rotation||0,l.scaleX=o.hasOwnProperty("scaleX")?o.scaleX:1,l.scaleY=o.hasOwnProperty("scaleY")?o.scaleY:1,l.inheritScale=o.hasOwnProperty("inheritScale")?o.inheritScale:!0,l.inheritRotation=o.hasOwnProperty("inheritRotation")?o.inheritRotation:!0,n.bones.push(l)}var p=t.ik;if(p)for(var a=0,s=p.length;s>a;a++){for(var u=p[a],f=new spine.IkConstraintData(u.name),r=u.bones,m=0,c=r.length;c>m;m++){var d=n.findBone(r[m]);if(!d)throw"IK bone not found: "+r[m];f.bones.push(d)}if(f.target=n.findBone(u.target),!f.target)throw"Target bone not found: "+u.target;f.bendDirection=!u.hasOwnProperty("bendPositive")||u.bendPositive?1:-1,f.mix=u.hasOwnProperty("mix")?u.mix:1,n.ikConstraints.push(f)}for(var g=t.slots,a=0,s=g.length;s>a;a++){var v=g[a],l=n.findBone(v.bone);if(!l)throw"Slot bone not found: "+v.bone;var y=new spine.SlotData(v.name,l),w=v.color;w&&(y.r=this.toColor(w,0),y.g=this.toColor(w,1),y.b=this.toColor(w,2),y.a=this.toColor(w,3)),y.attachmentName=v.attachment,y.additiveBlending=v.additive&&"true"==v.additive,n.slots.push(y)}var x=t.skins;for(var b in x)if(x.hasOwnProperty(b)){var S=x[b],A=new spine.Skin(b);for(var I in S)if(S.hasOwnProperty(I)){var T=n.findSlotIndex(I),k=S[I];for(var C in k)if(k.hasOwnProperty(C)){var X=this.readAttachment(A,C,k[C]);X&&A.addAttachment(T,C,X)}}n.skins.push(A),"default"==A.name&&(n.defaultSkin=A)}var P=t.events;for(var O in P)if(P.hasOwnProperty(O)){var Y=P[O],F=new spine.EventData(O);F.intValue=Y["int"]||0,F.floatValue=Y["float"]||0,F.stringValue=Y.string||null,n.events.push(F)}var M=t.animations;for(var V in M)M.hasOwnProperty(V)&&this.readAnimation(V,M[V],n);return n},readAttachment:function(t,e,n){e=n.name||e;var i=spine.AttachmentType[n.type||"region"],r=n.path||e,a=this.scale;if(i==spine.AttachmentType.region){var s=this.attachmentLoader.newRegionAttachment(t,e,r);if(!s)return null;s.path=r,s.x=(n.x||0)*a,s.y=(n.y||0)*a,s.scaleX=n.hasOwnProperty("scaleX")?n.scaleX:1,s.scaleY=n.hasOwnProperty("scaleY")?n.scaleY:1,s.rotation=n.rotation||0,s.width=(n.width||0)*a,s.height=(n.height||0)*a;var o=n.color;return o&&(s.r=this.toColor(o,0),s.g=this.toColor(o,1),s.b=this.toColor(o,2),s.a=this.toColor(o,3)),s.updateOffset(),s}if(i==spine.AttachmentType.mesh){var h=this.attachmentLoader.newMeshAttachment(t,e,r);return h?(h.path=r,h.vertices=this.getFloatArray(n,"vertices",a),h.triangles=this.getIntArray(n,"triangles"),h.regionUVs=this.getFloatArray(n,"uvs",1),h.updateUVs(),o=n.color,o&&(h.r=this.toColor(o,0),h.g=this.toColor(o,1),h.b=this.toColor(o,2),h.a=this.toColor(o,3)),h.hullLength=2*(n.hull||0),n.edges&&(h.edges=this.getIntArray(n,"edges")),h.width=(n.width||0)*a,h.height=(n.height||0)*a,h):null}if(i==spine.AttachmentType.skinnedmesh){var h=this.attachmentLoader.newSkinnedMeshAttachment(t,e,r);if(!h)return null;h.path=r;for(var l=this.getFloatArray(n,"uvs",1),p=this.getFloatArray(n,"vertices",1),u=[],f=[],m=0,c=p.length;c>m;){var d=0|p[m++];f[f.length]=d;for(var g=m+4*d;g>m;)f[f.length]=p[m],u[u.length]=p[m+1]*a,u[u.length]=p[m+2]*a,u[u.length]=p[m+3],m+=4}return h.bones=f,h.weights=u,h.triangles=this.getIntArray(n,"triangles"),h.regionUVs=l,h.updateUVs(),o=n.color,o&&(h.r=this.toColor(o,0),h.g=this.toColor(o,1),h.b=this.toColor(o,2),h.a=this.toColor(o,3)),h.hullLength=2*(n.hull||0),n.edges&&(h.edges=this.getIntArray(n,"edges")),h.width=(n.width||0)*a,h.height=(n.height||0)*a,h}if(i==spine.AttachmentType.boundingbox){for(var v=this.attachmentLoader.newBoundingBoxAttachment(t,e),p=n.vertices,m=0,c=p.length;c>m;m++)v.vertices.push(p[m]*a);return v}throw"Unknown attachment type: "+i},readAnimation:function(t,e,n){var i=[],r=0,a=e.slots;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s],h=n.findSlotIndex(s);for(var l in o)if(o.hasOwnProperty(l)){var p=o[l];if("color"==l){var u=new spine.ColorTimeline(p.length);u.slotIndex=h;for(var f=0,m=0,c=p.length;c>m;m++){var d=p[m],g=d.color,v=this.toColor(g,0),y=this.toColor(g,1),w=this.toColor(g,2),x=this.toColor(g,3);u.setFrame(f,d.time,v,y,w,x),this.readCurve(u,f,d),f++}i.push(u),r=Math.max(r,u.frames[5*u.getFrameCount()-5])}else{if("attachment"!=l)throw"Invalid timeline type for a slot: "+l+" ("+s+")";var u=new spine.AttachmentTimeline(p.length);u.slotIndex=h;for(var f=0,m=0,c=p.length;c>m;m++){var d=p[m];u.setFrame(f++,d.time,d.name)}i.push(u),r=Math.max(r,u.frames[u.getFrameCount()-1])}}}var b=e.bones;for(var S in b)if(b.hasOwnProperty(S)){var A=n.findBoneIndex(S);if(-1==A)throw"Bone not found: "+S;var I=b[S];for(var l in I)if(I.hasOwnProperty(l)){var p=I[l];if("rotate"==l){var u=new spine.RotateTimeline(p.length);u.boneIndex=A;for(var f=0,m=0,c=p.length;c>m;m++){var d=p[m];
u.setFrame(f,d.time,d.angle),this.readCurve(u,f,d),f++}i.push(u),r=Math.max(r,u.frames[2*u.getFrameCount()-2])}else if("translate"==l||"scale"==l){var u,T=1;"scale"==l?u=new spine.ScaleTimeline(p.length):(u=new spine.TranslateTimeline(p.length),T=this.scale),u.boneIndex=A;for(var f=0,m=0,c=p.length;c>m;m++){var d=p[m],k=(d.x||0)*T,C=(d.y||0)*T;u.setFrame(f,d.time,k,C),this.readCurve(u,f,d),f++}i.push(u),r=Math.max(r,u.frames[3*u.getFrameCount()-3])}else{if("flipX"!=l&&"flipY"!=l)throw"Invalid timeline type for a bone: "+l+" ("+S+")";var k="flipX"==l,u=k?new spine.FlipXTimeline(p.length):new spine.FlipYTimeline(p.length);u.boneIndex=A;for(var X=k?"x":"y",f=0,m=0,c=p.length;c>m;m++){var d=p[m];u.setFrame(f,d.time,d[X]||!1),f++}i.push(u),r=Math.max(r,u.frames[2*u.getFrameCount()-2])}}}var P=e.ik;for(var O in P)if(P.hasOwnProperty(O)){var Y=n.findIkConstraint(O),p=P[O],u=new spine.IkConstraintTimeline(p.length);u.ikConstraintIndex=n.ikConstraints.indexOf(Y);for(var f=0,m=0,c=p.length;c>m;m++){var d=p[m],F=d.hasOwnProperty("mix")?d.mix:1,M=!d.hasOwnProperty("bendPositive")||d.bendPositive?1:-1;u.setFrame(f,d.time,F,M),this.readCurve(u,f,d),f++}i.push(u),r=Math.max(r,u.frames[3*u.frameCount-3])}var V=e.ffd;for(var D in V){var B=n.findSkin(D),o=V[D];for(s in o){var h=n.findSlotIndex(s),U=o[s];for(var R in U){var p=U[R],u=new spine.FfdTimeline(p.length),W=B.getAttachment(h,R);if(!W)throw"FFD attachment not found: "+R;u.slotIndex=h,u.attachment=W;var E,N=W.type==spine.AttachmentType.mesh;E=N?W.vertices.length:W.weights.length/3*2;for(var f=0,m=0,c=p.length;c>m;m++){var L,d=p[m];if(d.vertices){var _=d.vertices,L=[];L.length=E;var j=d.offset||0,H=_.length;if(1==this.scale)for(var K=0;H>K;K++)L[K+j]=_[K];else for(var K=0;H>K;K++)L[K+j]=_[K]*this.scale;if(N)for(var G=W.vertices,K=0,H=L.length;H>K;K++)L[K]+=G[K]}else N?L=W.vertices:(L=[],L.length=E);u.setFrame(f,d.time,L),this.readCurve(u,f,d),f++}i[i.length]=u,r=Math.max(r,u.frames[u.frameCount-1])}}}var J=e.drawOrder;if(J||(J=e.draworder),J){for(var u=new spine.DrawOrderTimeline(J.length),q=n.slots.length,f=0,m=0,c=J.length;c>m;m++){var $=J[m],z=null;if($.offsets){z=[],z.length=q;for(var K=q-1;K>=0;K--)z[K]=-1;var Q=$.offsets,Z=[];Z.length=q-Q.length;for(var te=0,ee=0,K=0,H=Q.length;H>K;K++){var ne=Q[K],h=n.findSlotIndex(ne.slot);if(-1==h)throw"Slot not found: "+ne.slot;for(;te!=h;)Z[ee++]=te++;z[te+ne.offset]=te++}for(;q>te;)Z[ee++]=te++;for(var K=q-1;K>=0;K--)-1==z[K]&&(z[K]=Z[--ee])}u.setFrame(f++,$.time,z)}i.push(u),r=Math.max(r,u.frames[u.getFrameCount()-1])}var ie=e.events;if(ie){for(var u=new spine.EventTimeline(ie.length),f=0,m=0,c=ie.length;c>m;m++){var re=ie[m],ae=n.findEvent(re.name);if(!ae)throw"Event not found: "+re.name;var se=new spine.Event(ae);se.intValue=re.hasOwnProperty("int")?re["int"]:ae.intValue,se.floatValue=re.hasOwnProperty("float")?re["float"]:ae.floatValue,se.stringValue=re.hasOwnProperty("string")?re.string:ae.stringValue,u.setFrame(f++,re.time,se)}i.push(u),r=Math.max(r,u.frames[u.getFrameCount()-1])}n.animations.push(new spine.Animation(t,i,r))},readCurve:function(t,e,n){var i=n.curve;i?"stepped"==i?t.curves.setStepped(e):i instanceof Array&&t.curves.setCurve(e,i[0],i[1],i[2],i[3]):t.curves.setLinear(e)},toColor:function(t,e){if(8!=t.length)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substring(2*e,2*e+2),16)/255},getFloatArray:function(t,e,n){var i=t[e],r=new spine.Float32Array(i.length),a=0,s=i.length;if(1==n)for(;s>a;a++)r[a]=i[a];else for(;s>a;a++)r[a]=i[a]*n;return r},getIntArray:function(t,e){for(var n=t[e],i=new spine.Uint16Array(n.length),r=0,a=n.length;a>r;r++)i[r]=0|n[r];return i}},spine.Atlas=function(t,e){this.textureLoader=e,this.pages=[],this.regions=[];var n=new spine.AtlasReader(t),i=[];i.length=4;for(var r=null;;){var a=n.readLine();if(null===a)break;if(a=n.trim(a),a.length)if(r){var s=new spine.AtlasRegion;s.name=a,s.page=r,s.rotate="true"==n.readValue(),n.readTuple(i);var o=parseInt(i[0]),h=parseInt(i[1]);n.readTuple(i);var l=parseInt(i[0]),p=parseInt(i[1]);s.u=o/r.width,s.v=h/r.height,s.rotate?(s.u2=(o+p)/r.width,s.v2=(h+l)/r.height):(s.u2=(o+l)/r.width,s.v2=(h+p)/r.height),s.x=o,s.y=h,s.width=Math.abs(l),s.height=Math.abs(p),4==n.readTuple(i)&&(s.splits=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],4==n.readTuple(i)&&(s.pads=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],n.readTuple(i))),s.originalWidth=parseInt(i[0]),s.originalHeight=parseInt(i[1]),n.readTuple(i),s.offsetX=parseInt(i[0]),s.offsetY=parseInt(i[1]),s.index=parseInt(n.readValue()),this.regions.push(s)}else{r=new spine.AtlasPage,r.name=a,2==n.readTuple(i)&&(r.width=parseInt(i[0]),r.height=parseInt(i[1]),n.readTuple(i)),r.format=spine.Atlas.Format[i[0]],n.readTuple(i),r.minFilter=spine.Atlas.TextureFilter[i[0]],r.magFilter=spine.Atlas.TextureFilter[i[1]];var u=n.readValue();r.uWrap=spine.Atlas.TextureWrap.clampToEdge,r.vWrap=spine.Atlas.TextureWrap.clampToEdge,"x"==u?r.uWrap=spine.Atlas.TextureWrap.repeat:"y"==u?r.vWrap=spine.Atlas.TextureWrap.repeat:"xy"==u&&(r.uWrap=r.vWrap=spine.Atlas.TextureWrap.repeat),e.load(r,a,this),this.pages.push(r)}else r=null}},spine.Atlas.prototype={findRegion:function(t){for(var e=this.regions,n=0,i=e.length;i>n;n++)if(e[n].name==t)return e[n];return null},dispose:function(){for(var t=this.pages,e=0,n=t.length;n>e;e++)this.textureLoader.unload(t[e].rendererObject)},updateUVs:function(t){for(var e=this.regions,n=0,i=e.length;i>n;n++){var r=e[n];r.page==t&&(r.u=r.x/t.width,r.v=r.y/t.height,r.rotate?(r.u2=(r.x+r.height)/t.width,r.v2=(r.y+r.width)/t.height):(r.u2=(r.x+r.width)/t.width,r.v2=(r.y+r.height)/t.height))}}},spine.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},spine.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},spine.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},spine.AtlasPage=function(){},spine.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},spine.AtlasRegion=function(){},spine.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},spine.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)},spine.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw"Invalid line: "+e;for(var i=0,r=n+1;3>i;i++){var a=e.indexOf(",",r);if(-1==a)break;t[i]=this.trim(e.substr(r,a-r)),r=a+1}return t[i]=this.trim(e.substring(r)),i+1}},spine.AtlasAttachmentLoader=function(t){this.atlas=t},spine.AtlasAttachmentLoader.prototype={newRegionAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (region attachment: "+e+")";var r=new spine.RegionAttachment(e);return r.rendererObject=i,r.setUVs(i.u,i.v,i.u2,i.v2,i.rotate),r.regionOffsetX=i.offsetX,r.regionOffsetY=i.offsetY,r.regionWidth=i.width,r.regionHeight=i.height,r.regionOriginalWidth=i.originalWidth,r.regionOriginalHeight=i.originalHeight,r},newMeshAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (mesh attachment: "+e+")";var r=new spine.MeshAttachment(e);return r.rendererObject=i,r.regionU=i.u,r.regionV=i.v,r.regionU2=i.u2,r.regionV2=i.v2,r.regionRotate=i.rotate,r.regionOffsetX=i.offsetX,r.regionOffsetY=i.offsetY,r.regionWidth=i.width,r.regionHeight=i.height,r.regionOriginalWidth=i.originalWidth,r.regionOriginalHeight=i.originalHeight,r},newSkinnedMeshAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (skinned mesh attachment: "+e+")";var r=new spine.SkinnedMeshAttachment(e);return r.rendererObject=i,r.regionU=i.u,r.regionV=i.v,r.regionU2=i.u2,r.regionV2=i.v2,r.regionRotate=i.rotate,r.regionOffsetX=i.offsetX,r.regionOffsetY=i.offsetY,r.regionWidth=i.width,r.regionHeight=i.height,r.regionOriginalWidth=i.originalWidth,r.regionOriginalHeight=i.originalHeight,r},newBoundingBoxAttachment:function(t,e){return new spine.BoundingBoxAttachment(e)}},spine.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},spine.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(t,e){var n=t.slots,i=n.length,r=t.x,a=t.y,s=this.boundingBoxes,o=this.polygonPool,h=this.polygons;s.length=0;for(var l=0,p=h.length;p>l;l++)o.push(h[l]);h.length=0;for(var l=0;i>l;l++){var u=n[l],f=u.attachment;if(f.type==spine.AttachmentType.boundingbox){s.push(f);var m,c=o.length;c>0?(m=o[c-1],o.splice(c-1,1)):m=[],h.push(m),m.length=f.vertices.length,f.computeWorldVertices(r,a,u.bone,m)}}e&&this.aabbCompute()},aabbCompute:function(){for(var t=this.polygons,e=Number.MAX_VALUE,n=Number.MAX_VALUE,i=Number.MIN_VALUE,r=Number.MIN_VALUE,a=0,s=t.length;s>a;a++)for(var o=t[a],h=0,l=o.length;l>h;h+=2){var p=o[h],u=o[h+1];e=Math.min(e,p),n=Math.min(n,u),i=Math.max(i,p),r=Math.max(r,u)}this.minX=e,this.minY=n,this.maxX=i,this.maxY=r},aabbContainsPoint:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},aabbIntersectsSegment:function(t,e,n,i){var r=this.minX,a=this.minY,s=this.maxX,o=this.maxY;if(r>=t&&r>=n||a>=e&&a>=i||t>=s&&n>=s||e>=o&&i>=o)return!1;var h=(i-e)/(n-t),l=h*(r-t)+e;if(l>a&&o>l)return!0;if(l=h*(s-t)+e,l>a&&o>l)return!0;var p=(a-e)/h+t;return p>r&&s>p?!0:(p=(o-e)/h+t,p>r&&s>p?!0:!1)},aabbIntersectsSkeleton:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},containsPoint:function(t,e){for(var n=this.polygons,i=0,r=n.length;r>i;i++)if(this.polygonContainsPoint(n[i],t,e))return this.boundingBoxes[i];return null},intersectsSegment:function(t,e,n,i){for(var r=this.polygons,a=0,s=r.length;s>a;a++)if(r[a].intersectsSegment(t,e,n,i))return this.boundingBoxes[a];return null},polygonContainsPoint:function(t,e,n){for(var i=t.length,r=i-2,a=!1,s=0;i>s;s+=2){var o=t[s+1],h=t[r+1];if(n>o&&h>=n||n>h&&o>=n){var l=t[s];l+(n-o)/(h-o)*(t[r]-l)<e&&(a=!a)}r=s}return a},polygonIntersectsSegment:function(t,e,n,i,r){for(var a=t.length,s=e-i,o=n-r,h=e*r-n*i,l=t[a-2],p=t[a-1],u=0;a>u;u+=2){var f=t[u],m=t[u+1],c=l*m-p*f,d=l-f,g=p-m,v=s*g-o*d,y=(h*d-s*c)/v;if((y>=l&&f>=y||y>=f&&l>=y)&&(y>=e&&i>=y||y>=i&&e>=y)){var w=(h*g-o*c)/v;if((w>=p&&m>=w||w>=m&&p>=w)&&(w>=n&&r>=w||w>=r&&n>=w))return!0}l=f,p=m}return!1},getPolygon:function(t){var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},spine.Bone.yDown=!0,PIXI.SpineTextureLoader=function(t,e){this.basePath=t,this.crossorigin=e},PIXI.SpineTextureLoader.prototype.load=function(t,e){t.rendererObject=PIXI.BaseTexture.fromImage(this.basePath+"/"+e,this.crossorigin)},PIXI.SpineTextureLoader.prototype.unload=function(t){t.destroy(!0)},PIXI.Spine=function(t,e){var n=t.cache.getSpine(e);Phaser.Group.call(this,t);var i=new PIXI.SpineTextureLoader(n.basePath,!1),r=new spine.Atlas(t.cache.getText(n.atlas),i),a=new spine.AtlasAttachmentLoader(r),s=new spine.SkeletonJson(a);if(this.spineData=s.readSkeletonData(t.cache.getJSON(e)),!this.spineData)throw new Error("Spine data must be preloaded using Loader.spine");this.skeleton=new spine.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new spine.AnimationStateData(this.spineData),this.state=new spine.AnimationState(this.stateData),this.slotContainers=[];for(var o=0,h=this.skeleton.drawOrder.length;h>o;o++){var l=this.skeleton.drawOrder[o],p=l.attachment,u=new Phaser.Group(t);if(this.slotContainers.push(u),this.addChild(u),p instanceof spine.RegionAttachment){var f=p.rendererObject.name,m=this.createSprite(l,p);l.currentSprite=m,l.currentSpriteName=f,u.addChild(m)}else{if(!(p instanceof spine.MeshAttachment))continue;var c=this.createMesh(l,p);l.currentMesh=c,l.currentMeshName=p.name,u.addChild(c)}}this.autoUpdate=!0},PIXI.Spine.prototype=Object.create(Phaser.Group.prototype),PIXI.Spine.prototype.constructor=PIXI.Spine,Object.defineProperty(PIXI.Spine.prototype,"autoUpdate",{get:function(){return this.updateTransform===PIXI.Spine.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?PIXI.Spine.prototype.autoUpdateTransform:PIXI.DisplayObjectContainer.prototype.updateTransform}}),PIXI.Spine.prototype.update=function(t){if(void 0!==t){this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var e=this.skeleton.drawOrder,n=0,i=e.length;i>n;n++){var r=e[n],a=r.attachment,s=this.slotContainers[n];if(a){var o=a.type;if(o===spine.AttachmentType.region){if(a.rendererObject&&(!r.currentSpriteName||r.currentSpriteName!==a.name)){var h=a.rendererObject.name;if(void 0!==r.currentSprite&&(r.currentSprite.visible=!1),r.sprites=r.sprites||{},void 0!==r.sprites[h])r.sprites[h].visible=!0;else{var l=this.createSprite(r,a);s.addChild(l)}r.currentSprite=r.sprites[h],r.currentSpriteName=h}var p=r.bone;s.position.x=p.worldX+a.x*p.m00+a.y*p.m01,s.position.y=p.worldY+a.x*p.m10+a.y*p.m11,s.scale.x=p.worldScaleX,s.scale.y=p.worldScaleY,s.rotation=-(r.bone.worldRotation*spine.degRad)}else{if(o!==spine.AttachmentType.skinnedmesh){s.visible=!1;continue}if(!r.currentMeshName||r.currentMeshName!==a.name){var u=a.name;if(void 0!==r.currentMesh&&(r.currentMesh.visible=!1),r.meshes=r.meshes||{},void 0!==r.meshes[u])r.meshes[u].visible=!0;else{var f=this.createMesh(r,a);s.addChild(f)}r.currentMesh=r.meshes[u],r.currentMeshName=u}a.computeWorldVertices(r.bone.skeleton.x,r.bone.skeleton.y,r,r.currentMesh.vertices)}s.visible=!0,s.alpha=r.a}else s.visible=!1}}},PIXI.Spine.prototype.autoUpdateTransform=function(){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t),PIXI.DisplayObjectContainer.prototype.updateTransform.call(this)},PIXI.Spine.prototype.createSprite=function(t,e){var n=e.rendererObject,i=n.page.rendererObject,r=new PIXI.Rectangle(n.x,n.y,n.rotate?n.height:n.width,n.rotate?n.width:n.height),a=new PIXI.Texture(i,r),s=new Phaser.Sprite(this.game,0,0,a),o=n.rotate?.5*Math.PI:0;return s.scale.set(n.width/n.originalWidth,n.height/n.originalHeight),s.rotation=o-e.rotation*spine.degRad,s.anchor.x=s.anchor.y=.5,t.sprites=t.sprites||{},t.sprites[n.name]=s,this.game.phaserSpine.attachBitmap(s),s},PIXI.Spine.prototype.createMesh=function(t,e){var n=e.rendererObject,i=n.page.rendererObject,r=new PIXI.Texture(i),a=new PIXI.Strip(r);return a.drawMode=PIXI.Strip.DrawModes.TRIANGLES,a.canvasPadding=1.5,a.vertices=new PIXI.Float32Array(e.uvs.length),a.uvs=e.uvs,a.indices=e.triangles,t.meshes=t.meshes||{},t.meshes[e.name]=a,a},Phaser.Plugin.PhaserSpine=function(t,e){Phaser.Plugin.call(this,t,e),t.phaserSpine=this},Phaser.Loader.prototype.spine=function(t,e){var n=t+"Atlas",i={atlas:n,basePath:e.substring(0,e.lastIndexOf("/"))};this.json(t,e),this.text(n,e.substr(0,e.lastIndexOf("."))+".atlas"),this.game.cache.addSpine(t,i)},Phaser.GameObjectFactory.prototype.spine=function(t,e,n){var i=new PIXI.Spine(this.game,n);return i.skeleton.setToSetupPose(),i.position.x=t,i.position.y=e,this.game.stage.addChild(i),i},Phaser.Plugin.PhaserSpine.prototype._attachBitmap=function(t){var e=this.game.make.bitmapData(t.width,t.height),n={scaleX:t.scale.x,scaleY:t.scale.y,rotation:t.rotation};t.scale.x=t.scale.y=1,t.rotation=0,e.draw(t,t.width/2,t.height/2),e.update(),t.scale.set(n.scaleX,n.scaleY),t.rotation=n.rotation,t.loadTexture(e),t._bitmap=e},Phaser.Plugin.PhaserSpine.prototype.attachBitmap=function(t){t.texture.baseTexture.hasLoaded?this._attachBitmap(t):t.texture.on("update",this._attachBitmap.bind(this,t))},PIXI.Spine.prototype.setMixByName=function(t,e,n){this.stateData.setMixByName(t,e,n)},PIXI.Spine.prototype.setAnimationByName=function(t,e,n){this.state.setAnimationByName(t,e,n)},PIXI.Spine.prototype.addAnimationByName=function(t,e,n,i){this.state.addAnimationByName(t,e,n,i)},Phaser.Cache.prototype._spine={},Phaser.Cache.prototype.addSpine=function(t,e){this._spine[t]=e},Phaser.Cache.prototype.getSpine=function(t){return this._spine[t]};